"""
ë³´ê³ ì„œ ìƒì„± ì‹œìŠ¤í…œ - ì™„ì „ ê°€ì´ë“œ

ì´ ë¬¸ì„œëŠ” ë‹¤êµ­ì  ì‹œì¥ ì§„ì¶œ ì „ëµ ë³´ê³ ì„œ ìƒì„± ì‹œìŠ¤í…œì˜
ì‚¬ìš©ë²•, í”„ë¡¬í”„íŠ¸ í…œí”Œë¦¿, ì»¤ìŠ¤í„°ë§ˆì´ì§• ë°©ë²•ì„ ì„¤ëª…í•©ë‹ˆë‹¤.
"""

# ============================================================
# 1. ë¹ ë¥¸ ì‹œì‘
# ============================================================

"""
## ê¸°ë³¸ ì‚¬ìš©ë²•

```python
from report_agent import generate_report_agent

# 1. State ì¤€ë¹„ (ê° ì—ì´ì „íŠ¸ê°€ ìˆ˜ì§‘í•œ ë°ì´í„°)
state = {
    "company": "ìŠ¤íƒ€íŠ¸ì—…A",
    "country": "ë² íŠ¸ë‚¨",
    "market_summary": {...},
    "regulatory_data": {...},
    # ... ê¸°íƒ€ ë°ì´í„°
}

# 2. ë³´ê³ ì„œ ìƒì„±
result = generate_report_agent(state)

# 3. ê²°ê³¼ í™•ì¸
print(f"HTML: {result['html_report_path']}")
print(f"DOCX: {result['docx_report_path']}")
```

ìƒì„±ëœ ë³´ê³ ì„œëŠ” `/mnt/user-data/outputs/` ì— ì €ì¥ë©ë‹ˆë‹¤.
"""


# ============================================================
# 2. ê° ì—ì´ì „íŠ¸ìš© í”„ë¡¬í”„íŠ¸ í…œí”Œë¦¿
# ============================================================

class PromptTemplates:
    """ê° ì—ì´ì „íŠ¸ì—ì„œ ì‚¬ìš©í•  í”„ë¡¬í”„íŠ¸ í…œí”Œë¦¿"""
    
    # --------------------------------------------------------
    # ì‹œì¥ì¡°ì‚¬ ì—ì´ì „íŠ¸
    # --------------------------------------------------------
    MARKET_RESEARCH = """
ë‹¹ì‹ ì€ ê¸€ë¡œë²Œ ì‹œì¥ ì¡°ì‚¬ ì „ë¬¸ê°€ì…ë‹ˆë‹¤.
{company}ì˜ {country} ì‹œì¥ ì§„ì¶œì„ ìœ„í•œ ì‹œì¥ ì¡°ì‚¬ë¥¼ ìˆ˜í–‰í•˜ì„¸ìš”.

## ì¡°ì‚¬ ë²”ìœ„
1. TAM (Total Addressable Market) - ì „ì²´ ì‹œì¥ ê·œëª¨
2. ì—°ê°„ ì„±ì¥ë¥  (YoY)
3. íƒë°°/ë¬¼ë¥˜ ê±°ë˜ëŸ‰
4. í‰ê·  ë°°ì†¡ ë¹„ìš© ë° ë¦¬ë“œíƒ€ì„
5. ì†Œë¹„ í–‰íƒœ ë° ë¬¸í™”ì  íŠ¹ì„±
6. í•­ë§Œ/ê³µí•­/ë¬¼ë¥˜ ì¸í”„ë¼ í˜„í™©

## ì‚°ì¶œë¬¼ ìš”êµ¬ì‚¬í•­
ë‹¤ìŒ í˜•ì‹ì˜ JSONì„ ë°˜í™˜í•˜ì„¸ìš”:
{{
    "metrics": {{
        "TAM": "êµ¬ì²´ì  ê¸ˆì•¡ (ì˜ˆ: $2.5B)",
        "ì„±ì¥ë¥ ": "% YoY",
        "íƒë°°ëŸ‰": "ê±´ìˆ˜/ë…„",
        "í‰ê·  ë°°ì†¡ë¹„": "ê¸ˆì•¡",
        "ë¦¬ë“œíƒ€ì„": "ì¼ìˆ˜"
    }},
    "why_now": "ì´ ì‹œì¥ì— ì§€ê¸ˆ ì§„ì…í•´ì•¼ í•˜ëŠ” ì´ìœ ë¥¼ 1-2ë¬¸ì¥ìœ¼ë¡œ",
    "customer_segments": {{
        "high": "í”„ë¦¬ë¯¸ì—„ ê³ ê° ì„¸ê·¸ë¨¼íŠ¸ ì„¤ëª…",
        "mid": "ì¤‘ê°„ ê³ ê° ì„¸ê·¸ë¨¼íŠ¸ ì„¤ëª…",
        "low": "ì €ê°€ ê³ ê° ì„¸ê·¸ë¨¼íŠ¸ ì„¤ëª…"
    }}
}}

## ê°€ë“œë ˆì¼
- ëª¨ë“  ìˆ˜ì¹˜ëŠ” ì¶œì²˜ë¥¼ ëª…ì‹œí•  ê²ƒ
- "Why Now"ëŠ” 50ë‹¨ì–´ ì´ë‚´ë¡œ ê°„ê²°í•˜ê²Œ
- ë„ì‹œ vs ë¹„ë„ì‹œ ìˆ˜ìš” ì°¨ì´ë¥¼ ë°˜ë“œì‹œ ì–¸ê¸‰

## ì˜ˆì‹œ
ë² íŠ¸ë‚¨ì˜ ê²½ìš°:
- TAM: $2.5B (Statista 2024)
- ì„±ì¥ë¥ : 15% YoY (Vietnam E-commerce Report)
- Why Now: "ì´ì»¤ë¨¸ìŠ¤ ê¸‰ì„±ì¥(35% YoY)ê³¼ ì¤‘ì‚°ì¸µ í™•ëŒ€(ì—° 7% ì¦ê°€)ë¡œ 
   ë¹ ë¥¸ ë°°ì†¡ ìˆ˜ìš” í­ì¦. ì •ë¶€ì˜ ë¬¼ë¥˜ ì¸í”„ë¼ íˆ¬ìë¡œ ì§„ì… ì¥ë²½ ì™„í™”."

ì§€ê¸ˆ ì¡°ì‚¬ë¥¼ ì‹œì‘í•˜ì„¸ìš”.
"""

    # --------------------------------------------------------
    # ê·œì œê²€í†  ì—ì´ì „íŠ¸
    # --------------------------------------------------------
    REGULATORY_REVIEW = """
ë‹¹ì‹ ì€ êµ­ì œ ê·œì œ ë° ë²•ë¥  ì „ë¬¸ê°€ì…ë‹ˆë‹¤.
{company}ì˜ {country} ì‹œì¥ ì§„ì¶œ ì‹œ ì¤€ìˆ˜í•´ì•¼ í•  ê·œì œë¥¼ ê²€í† í•˜ì„¸ìš”.

## ê²€í†  í•­ëª©
1. ì‚¬ì—… ë¼ì´ì„ ìŠ¤ (íƒë°°ì—… ë“±ë¡, ì°½ê³ ì—… í—ˆê°€ ë“±)
2. í†µê´€Â·ê´€ì„¸ (HSì½”ë“œ, FTA, ê´€ì„¸ìœ¨)
3. ë°ì´í„°/ê°œì¸ì •ë³´ (GDPR, êµ­ì™¸ ì´ì „ ê·œì •)
4. ë…¸ë™ë²• (ë¼ì´ë” ê³ ìš©, ìµœì €ì„ê¸ˆ)
5. í”Œë«í¼ ê·œì œ (ì „ììƒê±°ë˜ë²•, í™˜ë¶ˆ/ë°˜í’ˆ)

## ë“±ê¸‰ ì •ì˜
- **MUST**: ë²•ë ¹ìƒ ì˜ë¬´ì‚¬í•­, ë¯¸ì¤€ìˆ˜ ì‹œ ì˜ì—… ë¶ˆê°€
- **SHOULD**: ê°•í•œ ê¶Œê³ ì‚¬í•­, ë¯¸ì¤€ìˆ˜ ì‹œ ë¦¬ìŠ¤í¬ ì¡´ì¬
- **NICE**: ì„ íƒì‚¬í•­, ê²½ìŸë ¥ ê°•í™” ìš”ì†Œ

## ìƒíƒœ ì •ì˜
- **PASS**: ìš”êµ¬ì‚¬í•­ ì¶©ì¡± (ê·¼ê±° í™•ë³´)
- **WARN**: ë¶€ë¶„ ì¶©ì¡± ë˜ëŠ” ëª¨í˜¸
- **TBD**: ì ìš© ì—¬ë¶€ ë¯¸í™•ì¸
- **NA**: í•´ë‹¹ ì—†ìŒ

## ì‚°ì¶œë¬¼ ìš”êµ¬ì‚¬í•­
ë‹¤ìŒ í˜•ì‹ì˜ JSONì„ ë°˜í™˜í•˜ì„¸ìš”:
{{
    "checklist": [
        {{
            "item": "íƒë°°ì—… ë“±ë¡",
            "grade": "MUST",
            "state": "PASS",
            "evidence": "êµ­í† ë¶€ ê³ ì‹œ ì œ2024-123í˜¸ í™•ì¸",
            "score_impact": 3  // MUST=3, SHOULD=2, NICE=0
        }},
        // ... ìµœì†Œ 10ê°œ í•­ëª©
    ],
    "coverage_score": 0.76,  // ìë™ ê³„ì‚°ë¨
    "risk_badge": "ë³´í†µ",  // ë‚®ìŒ/ë³´í†µ/ë†’ìŒ
    "hold_flag": false  // MUST-FAIL ì‹œ true
}}

## ì»¤ë²„ë¦¬ì§€ ê³„ì‚° ê³µì‹
ì»¤ë²„ë¦¬ì§€ = Î£(ë“±ê¸‰ ê°€ì¤‘ì¹˜ Ã— ìƒíƒœì ìˆ˜) Ã· Î£(ë“±ê¸‰ ê°€ì¤‘ì¹˜)

- ë“±ê¸‰ ê°€ì¤‘ì¹˜: MUST=3, SHOULD=2, NICE=0(ì œì™¸)
- ìƒíƒœ ì ìˆ˜: PASS=1.0, WARN=0.5, TBD=0.0, NA=ì œì™¸

## í˜ë„í‹° ê·œì¹™
- ì»¤ë²„ë¦¬ì§€ < 80% â†’ ì˜ì‚¬ê²°ì • ì ìˆ˜ -20
- ê°€ì¤‘ TBD ë¹„ìœ¨ â‰¥ 20% â†’ ì˜ì‚¬ê²°ì • ì ìˆ˜ -5
- MUST í•­ëª©ì´ FAIL â†’ ì¦‰ì‹œ HOLD (hold_flag = true)

## ì˜ˆì‹œ
ë² íŠ¸ë‚¨ íƒë°°ì—…ì˜ ê²½ìš°:
- íƒë°°ì—… ë“±ë¡: MUST/PASS (Decree 163/2017/ND-CP)
- ê°œì¸ì •ë³´ êµ­ì™¸ì´ì „: MUST/TBD (DPA í˜‘ì•½ í•„ìš”, ê·¼ê±° ë¯¸í™•ë³´)
- í™˜ë¶ˆÂ·ë°˜í’ˆ ê³ ì§€: SHOULD/PASS (Law on Consumer Protection)

ì§€ê¸ˆ ê²€í† ë¥¼ ì‹œì‘í•˜ì„¸ìš”.
"""

    # --------------------------------------------------------
    # ê²½ìŸì‚¬ ë¶„ì„ ì—ì´ì „íŠ¸
    # --------------------------------------------------------
    COMPETITOR_ANALYSIS = """
ë‹¹ì‹ ì€ ê²½ìŸ ì „ëµ ë¶„ì„ê°€ì…ë‹ˆë‹¤.
{country} ì‹œì¥ì˜ ë¬¼ë¥˜/íƒë°° ê²½ìŸ í™˜ê²½ì„ ë¶„ì„í•˜ì„¸ìš”.

## ë¶„ì„ í•­ëª©
1. ì£¼ìš” ê²½ìŸì‚¬ (í˜„ì§€ Top 3 + ê¸€ë¡œë²Œ í”Œë ˆì´ì–´)
2. ê°ì‚¬ì˜ ê°€ê²©ëŒ€, ì„œë¹„ìŠ¤ ë²”ìœ„, ì±„ë„
3. ì§€ì—­ë³„ ê²½ìŸ ë°€ì§‘ë„
4. í™”ì´íŠ¸ìŠ¤í˜ì´ìŠ¤ (ê²½ìŸ ê°­) ì‹ë³„

## ê²½ìŸì‚¬ ì‹ í˜¸ ì •ì˜
ë‹¤ìŒ ì¤‘ 2ê°œ ì´ìƒ í•´ë‹¹ ì‹œ ì§ì ‘ ê²½ìŸì‚¬:
- ê°™ì€ ê³ ê° ì„¸ê·¸ë¨¼íŠ¸ íƒ€ê¹ƒ
- ìš°ë¦¬ ì˜¤í¼ì™€ ëŒ€ì²´ ê°€ëŠ¥
- ê°™ì€ ì˜ì—… ì±„ë„ (RFP ê²¹ì¹¨)

## ì‚°ì¶œë¬¼ ìš”êµ¬ì‚¬í•­
{{
    "competitors": [
        {{
            "name": "íšŒì‚¬ëª…",
            "type": "í˜„ì§€/ê¸€ë¡œë²Œ",
            "price_level": "ê³ ê°€/ì¤‘ê°€/ì €ê°€",
            "service_scope": "êµ­ë‚´/êµ­ì œ/í’€í•„ë¨¼íŠ¸/...",
            "geographic_focus": ["í•˜ë…¸ì´", "í˜¸ì¹˜ë¯¼", "..."],
            "strengths": ["ê°•ì 1", "ê°•ì 2"],
            "weaknesses": ["ì•½ì 1", "ì•½ì 2"]
        }},
        // ... 5-10ê°œì‚¬
    ],
    "whitespace_gaps": [
        "ë†ì´Œ ì§€ì—­ ë‹¹ì¼ë°°ì†¡ ì„œë¹„ìŠ¤ ë¶€ì¬",
        "í”„ë¦¬ë¯¸ì—„ ì½œë“œì²´ì¸ ë¬¼ë¥˜ ë¯¸ê°œì²™",
        "ì¤‘ì†Œê¸°ì—… ì „ìš© í†µí•© í”Œë«í¼ ì—†ìŒ"
    ],
    "competition_intensity": "ë†’ìŒ/ë³´í†µ/ë‚®ìŒ"
}}

## í™”ì´íŠ¸ìŠ¤í˜ì´ìŠ¤ ê¸°ì¤€
- ìˆ˜ìš”ëŠ” ìˆìœ¼ë‚˜ ê³µê¸‰ ë¶€ì¡±
- ê¸°ì¡´ ì—…ì²´ì˜ ì„œë¹„ìŠ¤ í’ˆì§ˆ ë¶ˆë§Œì¡±
- ì¸í”„ë¼ëŠ” ìˆìœ¼ë‚˜ í™œìš© ë¯¸í¡

## ì˜ˆì‹œ
ë² íŠ¸ë‚¨ì˜ ê²½ìš°:
- ì£¼ìš” ê²½ìŸì‚¬: Vietnam Post (ê³µê¸°ì—…), Giao Hang Nhanh (ë¯¼ê°„ 1ìœ„), 
  Ninja Van (ë™ë‚¨ì•„ ê°•ì)
- í™”ì´íŠ¸ìŠ¤í˜ì´ìŠ¤: 
  1) ë©”ì½©ë¸íƒ€ ë‹¹ì¼ë°°ì†¡ (ì¸í”„ë¼ ìˆì§€ë§Œ ì—…ì²´ ì—†ìŒ)
  2) ì˜¨ë„ê´€ë¦¬ í•„ìˆ˜ ìƒí’ˆ (ì˜ì•½/í™”ì¥í’ˆ) B2B ë¬¼ë¥˜
  3) ì˜ì„¸ìƒì¸ìš© ê°„í¸ í†µí•© í”Œë«í¼

ì§€ê¸ˆ ë¶„ì„ì„ ì‹œì‘í•˜ì„¸ìš”.
"""

    # --------------------------------------------------------
    # íŒŒíŠ¸ë„ˆ ë°œêµ´ ì—ì´ì „íŠ¸
    # --------------------------------------------------------
    PARTNER_DISCOVERY = """
ë‹¹ì‹ ì€ ë¹„ì¦ˆë‹ˆìŠ¤ ê°œë°œ ì „ë¬¸ê°€ì…ë‹ˆë‹¤.
{company}ì˜ {country} ì§„ì¶œì„ ìœ„í•œ í•µì‹¬ íŒŒíŠ¸ë„ˆë¥¼ ë°œêµ´í•˜ì„¸ìš”.

## íŒŒíŠ¸ë„ˆ ì¹´í…Œê³ ë¦¬
1. ë¼ìŠ¤íŠ¸ë§ˆì¼ (ë°°ì†¡ íŒŒíŠ¸ë„ˆ)
2. í†µê´€ ë¸Œë¡œì»¤ (ê´€ì„¸/í†µê´€ ëŒ€í–‰)
3. ì°½ê³ /í’€í•„ë¨¼íŠ¸ (3PL)
4. ê²°ì œ ê²Œì´íŠ¸ì›¨ì´
5. ì‹œìŠ¤í…œ í†µí•©/ë¦¬ì…€ëŸ¬ (SI)
6. í”Œë«í¼ íŒŒíŠ¸ë„ˆ (Shopee, Lazada ë“±)

## íŒŒíŠ¸ë„ˆ ì„ ì • ê¸°ì¤€
- ìš°ë¦¬ì˜ í•µì‹¬ ì„±ê³µìš”ì¸(KSF) ë³´ì™„
- ê³µë™ KPI ì„¤ì • ê°€ëŠ¥
- ìˆ˜ìµ ê³µìœ  ëª¨ë¸ ì„±ë¦½
- Plan B (ëŒ€ì•ˆ) ì¡´ì¬

## ì‚°ì¶œë¬¼ ìš”êµ¬ì‚¬í•­
{{
    "candidates": [
        {{
            "name": "íŒŒíŠ¸ë„ˆì‚¬ëª…",
            "role": "ë¼ìŠ¤íŠ¸ë§ˆì¼/í†µê´€/3PL/...",
            "rationale": "ì„ ì • ì´ìœ  (1-2ë¬¸ì¥)",
            "kpis": ["ê³µë™ KPI1", "KPI2"],
            "revenue_model": "ë§ˆì§„ê³µìœ /ë¦¬í¼ëŸ´/ì¡°ì¸íŠ¸ì„¸ì¼ì¦ˆ",
            "alternative": "Plan B ì—…ì²´ëª…"
        }},
        // ... 3-5ê°œì‚¬
    ],
    "poc_proposal": "PoC ì œì•ˆì„œ 3ë¬¸ë‹¨ ì´ˆì•ˆ",
    "priority_zones": ["ìš°ì„  íƒìƒ‰ ê¶Œì—­1", "ê¶Œì—­2"]  // ê²½ìŸ ë°€ì§‘ ì§€ì—­
}}

## PoC ì œì•ˆì„œ êµ¬ì¡°
1ë‹¨ë½: ë°°ê²½ ë° ëª©í‘œ
2ë‹¨ë½: 3ê°œì›” ì‹œë²” ìš´ì˜ ê³„íš
3ë‹¨ë½: ì„±ê³µ ì§€í‘œ ë° í™•ì¥ ë¡œë“œë§µ

## ì˜ˆì‹œ
ë² íŠ¸ë‚¨ì˜ ê²½ìš°:
- VietPost: êµ­ì˜ìš°í¸, ì „êµ­ ë„¤íŠ¸ì›Œí¬, ì •ë¶€ ì‹ ë¢°ë„ â†’ ì´ˆê¸° B2G íŒŒíŠ¸ë„ˆ
  (ëŒ€ì•ˆ: Giao Hang Nhanh - ë¯¼ê°„ 1ìœ„)
- FPT Software: ë² íŠ¸ë‚¨ SI 1ìœ„, ë¬¼ë¥˜ ê²½í—˜ â†’ ì‹œìŠ¤í…œ ì»¤ìŠ¤í„°ë§ˆì´ì§•
  (ëŒ€ì•ˆ: TMA Solutions)

ì§€ê¸ˆ ë°œêµ´ì„ ì‹œì‘í•˜ì„¸ìš”.
"""

    # --------------------------------------------------------
    # ë¦¬ìŠ¤í¬ ì‹œë‚˜ë¦¬ì˜¤ ì—ì´ì „íŠ¸
    # --------------------------------------------------------
    RISK_SCENARIOS = """
ë‹¹ì‹ ì€ ë¦¬ìŠ¤í¬ ê´€ë¦¬ ì „ë¬¸ê°€ì…ë‹ˆë‹¤.
{company}ì˜ {country} ì§„ì¶œ ì‹œ ë°œìƒ ê°€ëŠ¥í•œ ë¦¬ìŠ¤í¬ë¥¼ ë¶„ì„í•˜ì„¸ìš”.

## ë¦¬ìŠ¤í¬ ì¹´í…Œê³ ë¦¬
1. ê·œì œ ë¦¬ìŠ¤í¬ (ë²• ê°œì •, ì§‘í–‰ ê°•í™”)
2. ì‹œì¥ ë¦¬ìŠ¤í¬ (ìˆ˜ìš” ë¶€ì§„, ê°€ê²© ê²½ìŸ)
3. ìš´ì˜ ë¦¬ìŠ¤í¬ (íŒŒíŠ¸ë„ˆ ì´íƒˆ, í’ˆì§ˆ ë¬¸ì œ)
4. ì¬ë¬´ ë¦¬ìŠ¤í¬ (í™˜ìœ¨, ìê¸ˆ ë¶€ì¡±)
5. í‰íŒ ë¦¬ìŠ¤í¬ (ì‚¬ê³ , ë¶ˆë§Œ)

## í‰ê°€ ê¸°ì¤€
- **ê°€ëŠ¥ì„±**: ë†’ìŒ/ë³´í†µ/ë‚®ìŒ
- **ì˜í–¥**: ë†’ìŒ/ë³´í†µ/ë‚®ìŒ
- ë†’ìŒÃ—ë†’ìŒ â†’ ì¦‰ì‹œ ëŒ€ì‘ í•„ìš”

## ì‚°ì¶œë¬¼ ìš”êµ¬ì‚¬í•­
{{
    "register": [
        {{
            "risk": "ë¦¬ìŠ¤í¬ ì„¤ëª…",
            "likelihood": "ë†’ìŒ/ë³´í†µ/ë‚®ìŒ",
            "impact": "ë†’ìŒ/ë³´í†µ/ë‚®ìŒ",
            "early_sign": "ì´ˆê¸° ì§•í›„ (KPI ì„ê³„ì¹˜)",
            "mitigation": "ì™„í™” ì „ëµ",
            "plan_b": "Plan B"
        }},
        // ... 5-10ê°œ
    ],
    "scenarios": {{
        "pessimistic": {{
            "ì›” ê±°ë˜ëŸ‰": "10Kê±´",
            "ìˆ˜ìµ": "-$50K",
            "ì¡°ê±´": "ê²½ìŸ ì‹¬í™” + ê·œì œ ê°•í™”"
        }},
        "base": {{
            "ì›” ê±°ë˜ëŸ‰": "30Kê±´",
            "ìˆ˜ìµ": "$20K",
            "ì¡°ê±´": "ê³„íšëŒ€ë¡œ ì§„í–‰"
        }},
        "optimistic": {{
            "ì›” ê±°ë˜ëŸ‰": "100Kê±´",
            "ìˆ˜ìµ": "$150K",
            "ì¡°ê±´": "í”Œë«í¼ íŒŒíŠ¸ë„ˆì‹­ ì„±ê³µ"
        }}
    }}
}}

## ì–¼ë¦¬ ì›Œë‹ ì„ê³„ì¹˜ ì˜ˆì‹œ
- ë¦¬ë“œíƒ€ì„ > 5ì¼ (ê¸°ì¤€: 3ì¼) â†’ ë¬¼ë¥˜ ë¬¸ì œ
- ë°˜í’ˆìœ¨ > 10% (ê¸°ì¤€: 5%) â†’ í’ˆì§ˆ ë¬¸ì œ
- CAC > $50 (ê¸°ì¤€: $30) â†’ ë§ˆì¼€íŒ… ë¹„íš¨ìœ¨

## ì˜ˆì‹œ
ë² íŠ¸ë‚¨ ê·œì œ ë¦¬ìŠ¤í¬:
- ë¦¬ìŠ¤í¬: ê°œì¸ì •ë³´ë³´í˜¸ë²• ê°•í™”ë¡œ DPA ì—†ì´ ì˜ì—… ë¶ˆê°€
- ê°€ëŠ¥ì„±: ë³´í†µ (ì •ë¶€ ë°œí‘œ ì—†ìŒ)
- ì˜í–¥: ë†’ìŒ (ì„œë¹„ìŠ¤ ì¤‘ë‹¨)
- ì´ˆê¸° ì§•í›„: êµ­íšŒ ë²•ì•ˆ ìƒì • ë‰´ìŠ¤
- ì™„í™”: DPA ì‚¬ì „ ì²´ê²° + í˜„ì§€ ë°ì´í„°ì„¼í„° í™•ë³´

ì§€ê¸ˆ ë¶„ì„ì„ ì‹œì‘í•˜ì„¸ìš”.
"""

    # --------------------------------------------------------
    # ì˜ì‚¬ê²°ì • ì—ì´ì „íŠ¸
    # --------------------------------------------------------
    DECISION_MAKING = """
ë‹¹ì‹ ì€ ì „ëµ ì˜ì‚¬ê²°ì • ë‹´ë‹¹ìì…ë‹ˆë‹¤.
ëª¨ë“  ë¶„ì„ ê²°ê³¼ë¥¼ ì¢…í•©í•˜ì—¬ Go/No-Goë¥¼ ê²°ì •í•˜ì„¸ìš”.

## ì…ë ¥ ë°ì´í„°
- ì‹œì¥ì¡°ì‚¬ ê²°ê³¼
- ê·œì œ ì»¤ë²„ë¦¬ì§€ ë° ë¦¬ìŠ¤í¬
- ê²½ìŸ ê°•ë„
- íŒŒíŠ¸ë„ˆ ê°€ìš©ì„±
- ë¦¬ìŠ¤í¬ ì‹œë‚˜ë¦¬ì˜¤

## ì˜ì‚¬ê²°ì • ë£°
ê¸°ë³¸ ì ìˆ˜: 70ì 

**ê°€ì **
- ê·œì œ ì»¤ë²„ë¦¬ì§€ â‰¥ 90% â†’ +10
- ì‹¤í–‰ê°€ëŠ¥ì„± ë†’ìŒ (íŒŒíŠ¸ë„ˆ 2ê°œ ì´ìƒ) â†’ +20

**ê°ì **
- ê·œì œ ì»¤ë²„ë¦¬ì§€ < 80% â†’ -20
- ê°€ì¤‘ TBD ë¹„ìœ¨ â‰¥ 20% â†’ -5
- ê²½ìŸ ê°•ë„ ë†’ìŒ & í™”ì´íŠ¸ìŠ¤í˜ì´ìŠ¤ ì—†ìŒ â†’ -10

**ì¦‰ì‹œ HOLD**
- MUST ê·œì œ FAIL â†’ hold_flag = true

**ìµœì¢… íŒì •**
- ì ìˆ˜ â‰¥ 60 â†’ "ì§„í–‰(ì¶”ì²œ)"
- ì ìˆ˜ < 60 â†’ "ë³´ë¥˜ (ì¶”ê°€ì¡°ì‚¬ 2ê°œ ì œì‹œ)"

## ì‚°ì¶œë¬¼ ìš”êµ¬ì‚¬í•­
{{
    "decision": "ì§„í–‰(ì¶”ì²œ) / ë³´ë¥˜",
    "rationale": "í•œ ë¬¸ì¥ìœ¼ë¡œ ê·¼ê±°",
    "final_score": 72,
    "scorecard": {{
        "ì‹œì¥ ë§¤ë ¥ë„": 85,
        "ê·œì œ ë¦¬ìŠ¤í¬": 65,
        "ê²½ìŸ ê°•ë„": 60,
        "ì‹¤í–‰ ê°€ëŠ¥ì„±": 75,
        "íŒŒíŠ¸ë„ˆ ê°€ìš©ì„±": 80
    }},
    "next_steps": [
        "ì•¡ì…˜1 (ê¸°í•œ)",
        "ì•¡ì…˜2 (ê¸°í•œ)",
        // ... ë³´ë¥˜ ì‹œ ì¶”ê°€ì¡°ì‚¬ 2ê°œë§Œ
    ]
}}

## ì˜ˆì‹œ
ì§„í–‰ ì¼€ì´ìŠ¤:
- ì ìˆ˜: 72 (ê·œì œ ì»¤ë²„ë¦¬ì§€ 76% â†’ -20, íŒŒíŠ¸ë„ˆ 2ê°œ â†’ +20, ê¸°ë³¸ 70)
- ê·¼ê±°: "ì‹œì¥ ì„±ì¥ì„±(85)ê³¼ ì‹¤í–‰ ê°€ëŠ¥ì„±(75) ë†’ìŒ. ê·œì œëŠ” DPA ì²´ê²°ë¡œ í•´ê²° ê°€ëŠ¥"

ë³´ë¥˜ ì¼€ì´ìŠ¤:
- ì ìˆ˜: 45
- ê·¼ê±°: "MUST ê·œì œ(DPA) ë¯¸í™•ë³´ ë° ê²½ìŸ ë°€ì§‘ìœ¼ë¡œ ì§„ì… ì¥ë²½ ë†’ìŒ"
- Next Steps:
  1. DPA í˜‘ì•½ ì²´ê²° ê°€ëŠ¥ì„± ì¬ê²€í†  (2ì£¼)
  2. ëŒ€ì•ˆ ì‹œì¥(í•„ë¦¬í•€) ê²€í†  (1ê°œì›”)

ì§€ê¸ˆ ê²°ì •í•˜ì„¸ìš”.
"""


# ============================================================
# 3. ë³´ê³ ì„œ ì»¤ìŠ¤í„°ë§ˆì´ì§• ê°€ì´ë“œ
# ============================================================

class CustomizationGuide:
    """ë³´ê³ ì„œ ìŠ¤íƒ€ì¼ ë° ë‚´ìš© ì»¤ìŠ¤í„°ë§ˆì´ì§•"""
    
    @staticmethod
    def change_colors():
        """ìƒ‰ìƒ ë³€ê²½ ì˜ˆì‹œ"""
        instructions = """
        HTML ë³´ê³ ì„œì˜ ìƒ‰ìƒì„ ë³€ê²½í•˜ë ¤ë©´:
        
        1. report_templates.py íŒŒì¼ ì—´ê¸°
        2. <style> íƒœê·¸ ë‚´ë¶€ì˜ ìƒ‰ìƒ ì½”ë“œ ìˆ˜ì •:
        
        ```css
        /* ê¸°ë³¸ ê·¸ë¼ë°ì´ì…˜ (íŒŒë€ìƒ‰ â†’ ë³´ë¼ìƒ‰) */
        .gradient-bg {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }
        
        /* ì´ˆë¡ìƒ‰ í…Œë§ˆë¡œ ë³€ê²½ */
        .gradient-bg {
            background: linear-gradient(135deg, #11998e 0%, #38ef7d 100%);
        }
        
        /* ë¹¨ê°„ìƒ‰ í…Œë§ˆë¡œ ë³€ê²½ */
        .gradient-bg {
            background: linear-gradient(135deg, #ee0979 0%, #ff6a00 100%);
        }
        ```
        
        3. ë°°ì§€ ìƒ‰ìƒë„ ë§ˆì°¬ê°€ì§€ë¡œ RGBColor ìˆ˜ì •
        """
        return instructions
    
    @staticmethod
    def add_custom_section():
        """ì»¤ìŠ¤í…€ ì„¹ì…˜ ì¶”ê°€ ì˜ˆì‹œ"""
        instructions = """
        ìƒˆë¡œìš´ ì„¹ì…˜ì„ ì¶”ê°€í•˜ë ¤ë©´:
        
        1. report_templates.pyì— ë©”ì„œë“œ ì¶”ê°€:
        
        ```python
        @staticmethod
        def _generate_custom_section(data: Dict) -> str:
            return f'''
                <div class="card p-8">
                    <h2 class="section-title">ğŸ¯ ì»¤ìŠ¤í…€ ì„¹ì…˜</h2>
                    <p>{data.get('content', 'ë‚´ìš© ì—†ìŒ')}</p>
                </div>
            '''
        ```
        
        2. generate_html_report() ë©”ì„œë“œ ë‚´ë¶€ì— ì¶”ê°€:
        
        ```python
        <!-- ê¸°ì¡´ ì„¹ì…˜ë“¤ -->
        {cls._generate_custom_section(state.get('custom_data', {}))}
        <!-- ë‹¤ìŒ ì„¹ì…˜ -->
        ```
        
        3. Stateì— custom_data í•„ë“œ ì¶”ê°€
        """
        return instructions
    
    @staticmethod
    def change_fonts():
        """í°íŠ¸ ë³€ê²½ ì˜ˆì‹œ"""
        instructions = """
        í°íŠ¸ë¥¼ ë³€ê²½í•˜ë ¤ë©´:
        
        HTML: <style> íƒœê·¸ì—ì„œ
        ```css
        @import url('https://fonts.googleapis.com/css2?family=ì›í•˜ëŠ”í°íŠ¸&display=swap');
        
        body {
            font-family: 'ì›í•˜ëŠ”í°íŠ¸', sans-serif;
        }
        ```
        
        DOCX: docx_report_generator.pyì˜ _setup_styles()ì—ì„œ
        ```python
        font.name = 'Malgun Gothic'  # ì›í•˜ëŠ” í°íŠ¸
        ```
        """
        return instructions


# ============================================================
# 4. í†µí•© ì˜ˆì‹œ - ì „ì²´ í”Œë¡œìš°
# ============================================================

def example_full_workflow():
    """ì „ì²´ ì›Œí¬í”Œë¡œìš° ì‹¤í–‰ ì˜ˆì‹œ"""
    
    from langgraph.graph import StateGraph, END
    from typing_extensions import TypedDict
    from typing import Annotated
    
    # State ì •ì˜
    class FullState(TypedDict):
        company: str
        country: str
        messages: Annotated[list, add_messages]
        market_summary: Dict
        regulatory_data: Dict
        competitor_data: Dict
        partner_data: Dict
        risk_data: Dict
        decision_data: Dict
        visualizations: Dict[str, str]
        html_report_path: str
        docx_report_path: str
        report_generated: bool
        hold_flag: bool
    
    # ê° ì—ì´ì „íŠ¸ (ì‹¤ì œë¡œëŠ” LLM í˜¸ì¶œ í¬í•¨)
    def market_research(state):
        # TODO: LLMì— PromptTemplates.MARKET_RESEARCH ì „ë‹¬
        state["market_summary"] = {"metrics": {}, "why_now": "..."}
        return state
    
    def regulatory_review(state):
        # TODO: LLMì— PromptTemplates.REGULATORY_REVIEW ì „ë‹¬
        state["regulatory_data"] = {"coverage_score": 0.8, ...}
        return state
    
    def competitor_analysis(state):
        # TODO: LLMì— PromptTemplates.COMPETITOR_ANALYSIS ì „ë‹¬
        state["competitor_data"] = {"whitespace_gaps": [...]}
        return state
    
    def partner_discovery(state):
        # TODO: LLMì— PromptTemplates.PARTNER_DISCOVERY ì „ë‹¬
        state["partner_data"] = {"candidates": [...]}
        return state
    
    def risk_scenarios(state):
        # TODO: LLMì— PromptTemplates.RISK_SCENARIOS ì „ë‹¬
        state["risk_data"] = {"register": [...]}
        return state
    
    def decision_making(state):
        # TODO: LLMì— PromptTemplates.DECISION_MAKING ì „ë‹¬
        state["decision_data"] = {"decision": "ì§„í–‰", ...}
        return state
    
    # ë³´ê³ ì„œ ìƒì„±ì€ ì´ë¯¸ êµ¬í˜„ë¨
    from report_agent import generate_report_agent
    
    # ê·¸ë˜í”„ êµ¬ì„±
    workflow = StateGraph(FullState)
    workflow.add_node("market_research", market_research)
    workflow.add_node("regulatory_review", regulatory_review)
    workflow.add_node("competitor_analysis", competitor_analysis)
    workflow.add_node("partner_discovery", partner_discovery)
    workflow.add_node("risk_scenarios", risk_scenarios)
    workflow.add_node("decision_making", decision_making)
    workflow.add_node("report_generation", generate_report_agent)
    
    # ì—£ì§€
    workflow.set_entry_point("market_research")
    workflow.add_edge("market_research", "regulatory_review")
    workflow.add_edge("regulatory_review", "competitor_analysis")
    workflow.add_edge("competitor_analysis", "partner_discovery")
    workflow.add_edge("partner_discovery", "risk_scenarios")
    workflow.add_edge("risk_scenarios", "decision_making")
    workflow.add_edge("decision_making", "report_generation")
    workflow.add_edge("report_generation", END)
    
    app = workflow.compile()
    
    # ì‹¤í–‰
    initial_state = {
        "company": "ìŠ¤íƒ€íŠ¸ì—…A",
        "country": "ë² íŠ¸ë‚¨",
        "messages": [],
        # ... ë‚˜ë¨¸ì§€ ì´ˆê¸°í™”
    }
    
    result = app.invoke(initial_state)
    
    print(f"âœ… ë³´ê³ ì„œ ìƒì„± ì™„ë£Œ!")
    print(f"   HTML: {result['html_report_path']}")
    print(f"   DOCX: {result['docx_report_path']}")


# ============================================================
# 5. ìì£¼ ë¬»ëŠ” ì§ˆë¬¸ (FAQ)
# ============================================================

FAQ = """
Q1. ë³´ê³ ì„œì— ë¡œê³ ë¥¼ ì¶”ê°€í•˜ê³  ì‹¶ì–´ìš”.
A1. HTML: <img src="data:image/png;base64,..." ë°©ì‹ìœ¼ë¡œ ì‚½ì…
    DOCX: doc.add_picture(logo_path) ì‚¬ìš©

Q2. ë³´ê³ ì„œë¥¼ PDFë¡œë„ ë°›ê³  ì‹¶ì–´ìš”.
A2. HTMLì„ ìƒì„±í•œ í›„ wkhtmltopdf ë˜ëŠ” playwrightë¡œ PDF ë³€í™˜:
    ```bash
    playwright chromium --headless --print-to-pdf report.pdf report.html
    ```

Q3. ì°¨íŠ¸/ì§€ë„ê°€ ì•ˆ ë‚˜ì™€ìš”.
A3. visualizations ë”•ì…”ë„ˆë¦¬ì— ì˜¬ë°”ë¥¸ ê²½ë¡œê°€ ìˆëŠ”ì§€ í™•ì¸:
    ```python
    state["visualizations"] = {
        "demand_heatmap": "/mnt/user-data/outputs/heatmap.png",
        ...
    }
    ```

Q4. ì—¬ëŸ¬ êµ­ê°€ë¥¼ í•œ ë²ˆì— ë¶„ì„í•˜ê³  ì‹¶ì–´ìš”.
A4. ë£¨í”„ë¡œ ì‹¤í–‰:
    ```python
    countries = ["ë² íŠ¸ë‚¨", "íƒœêµ­", "ì¸ë„ë„¤ì‹œì•„"]
    for country in countries:
        state["country"] = country
        result = app.invoke(state)
    ```

Q5. ë³´ê³ ì„œ ìƒì„±ì´ ëŠë ¤ìš”.
A5. ì´ë¯¸ì§€ ìµœì í™” (í•´ìƒë„ ë‚®ì¶”ê¸°) ë˜ëŠ” ë³‘ë ¬ ì²˜ë¦¬ ê³ ë ¤

Q6. íŠ¹ì • ì„¹ì…˜ë§Œ ì—…ë°ì´íŠ¸í•˜ê³  ì‹¶ì–´ìš”.
A6. í•´ë‹¹ ì—ì´ì „íŠ¸ë§Œ ì¬ì‹¤í–‰ í›„ ë³´ê³ ì„œ ì¬ìƒì„±
"""


if __name__ == "__main__":
    print("=" * 70)
    print(" ë‹¤êµ­ì  ì‹œì¥ ì§„ì¶œ ì „ëµ ë³´ê³ ì„œ ìƒì„± ì‹œìŠ¤í…œ - ì™„ì „ ê°€ì´ë“œ")
    print("=" * 70)
    print()
    print("ğŸ“š ì´ íŒŒì¼ì€ ë³´ê³ ì„œ ìƒì„± ì‹œìŠ¤í…œì˜ ì‚¬ìš©ë²•ì„ ì„¤ëª…í•©ë‹ˆë‹¤.")
    print()
    print("ì£¼ìš” ì»´í¬ë„ŒíŠ¸:")
    print("  1. report_templates.py - HTML ë³´ê³ ì„œ ìƒì„±ê¸°")
    print("  2. docx_report_generator.py - DOCX ë³´ê³ ì„œ ìƒì„±ê¸°")
    print("  3. report_agent.py - LangGraph í†µí•© ì—ì´ì „íŠ¸")
    print("  4. ì´ íŒŒì¼ - í”„ë¡¬í”„íŠ¸ í…œí”Œë¦¿ & ê°€ì´ë“œ")
    print()
    print("=" * 70)
    print()
    print("ğŸ“‹ í”„ë¡¬í”„íŠ¸ í…œí”Œë¦¿ ëª©ë¡:")
    print("  - MARKET_RESEARCH")
    print("  - REGULATORY_REVIEW")
    print("  - COMPETITOR_ANALYSIS")
    print("  - PARTNER_DISCOVERY")
    print("  - RISK_SCENARIOS")
    print("  - DECISION_MAKING")
    print()
    print("ê° í…œí”Œë¦¿ì€ PromptTemplates í´ë˜ìŠ¤ì—ì„œ í™•ì¸í•˜ì„¸ìš”.")
    print()
    print("=" * 70)
